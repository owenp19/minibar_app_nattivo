<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ChargeIt - Desbloqueo de Habitación</title>

  <!-- Remix Icons -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">

  <!-- google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton+SC&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

  <!-- Tu CSS principal -->
  <link rel="stylesheet" href="css/chargeit-minibar.css">
</head>

<body>
  <div class="app-shell">
    <!-- Sidebar (opcional si ya lo usas en otras páginas) -->
    <aside class="sidebar">
      <div class="sidebar-top">
        <div class="sidebar-logo-block">
          <!-- tu logo -->
          <img class="sidebar-logo" src="images/Logo_Nattivo_v2.png" alt="ChargeIt">
        </div>

        <div class="sidebar-user">
          <div class="sidebar-user-avatar" id="user-initials">OP</div>
          <div class="sidebar-user-info">
            <div class="sidebar-user-name" id="user-name">Usuario</div>
            <div class="sidebar-user-role">Operación</div>
          </div>
        </div>

        <nav class="sidebar-nav">
          <a class="nav-item" href="/chargeit-minibar.html">
            <i class="ri-shopping-bag-3-line nav-icon"></i>
            Consumo
          </a>
          <a class="nav-item nav-item-active" href="/unlock-folio.html">
            <i class="ri-lock-unlock-line nav-icon"></i>
            Desbloqueo
          </a>
          <div class="sidebar-bottom">
        <form action="/api/auth/logout" method="POST" class="sidebar-nav">
          <button type="submit" class="nav-item nav-item-danger">
            <i class="ri-logout-box-line nav-icon"></i>
            <span class="nav-label">Cerrar sesión</span>
          </button>
        </form>
      </div>
    </aside>

    <div class="sidebar-backdrop" id="sidebar-backdrop"></div>

    <!-- Main -->
    <main class="main-panel">
      <header class="main-header">
        <button class="menu-toggle" id="menu-toggle">
          <i class="ri-menu-line"></i>
        </button>

        <div class="main-header-title">
          <div class="breadcrumb">
            <i class="ri-home-5-line"></i>
            <span>Herramientas</span>
            <i class="ri-arrow-right-s-line"></i>
            <strong>Desbloqueo</strong>
          </div>

          <h1>Desbloqueo de habitación</h1>
          <p>Selecciona una o varias habitaciones y genera el mensaje para WhatsApp.</p>
        </div>
      </header>

      <section class="card">
        <div class="card-head">
          <div>
            <h2 class="card-title">Selección de habitaciones</h2>
            <p class="card-subtitle">Puedes seleccionar múltiples habitaciones.</p>
          </div>

          <div class="card-head-actions">
            <button class="btn-secondary" type="button" id="unlock-refresh-rooms-btn">
              <i class="ri-refresh-line"></i>
              Recargar
            </button>
            <button class="btn-ghost" type="button" id="unlock-select-all-btn">
              <i class="ri-check-double-line"></i>
              Seleccionar todas
            </button>
            <button class="btn-ghost" type="button" id="unlock-clear-selection-btn">
              <i class="ri-close-circle-line"></i>
              Limpiar
            </button>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-column">
            <div class="form-section">
              <label for="rooms-multi">
                Habitaciones
              </label>

              <!-- MULTISELECT -->
              <select id="rooms-multi" multiple size="10"></select>

              <div class="helper-text">
                <i class="ri-information-line"></i>
                Tip: En Windows usa Ctrl para seleccionar varias. En Mac usa Cmd.
              </div>
            </div>

            <div class="form-section">
              <label for="unlock-note">Nota (opcional)</label>
              <textarea id="unlock-note" placeholder="Ej: Favor desbloquear folio por mantenimiento."></textarea>
            </div>

            <div class="actions">
              <div class="action-row">
                <button class="btn-secondary" type="button" id="unlock-preview-btn">
                  <i class="ri-eye-line"></i>
                  Vista previa
                </button>

                <button class="btn-ghost" type="button" id="unlock-copy-btn">
                  <i class="ri-file-copy-line"></i>
                  Copiar
                </button>
              </div>

              <button class="btn-primary" type="button" id="unlock-send-btn">
                <i class="ri-send-plane-2-line"></i>
                Enviar por WhatsApp
              </button>

              <div class="status" id="unlock-status"></div>
            </div>
          </div>

          <div class="form-column-side">
            <div class="report-card">
              <div class="report-head">
                <div>
                  <h2>Resumen</h2>
                  <p class="summary-text-report">Se genera con fecha y hora.</p>
                </div>
                <span class="pill">
                  <i class="ri-lock-unlock-line"></i>
                  Desbloqueo
                </span>
              </div>

              <div class="preview-box" id="unlock-preview-box">—</div>

              <div class="helper-text">
                <i class="ri-whatsapp-line"></i>
                Si <code>WHATSAPP_PHONE</code> está vacío, WhatsApp te deja elegir el contacto.
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Modal preview reutilizable -->
      <div class="modal" id="preview-modal" aria-hidden="true">
        <div class="modal-card">
          <div class="modal-head">
            <h3>Vista previa del mensaje</h3>
            <button class="btn-ghost" type="button" id="close-preview-btn">
              <i class="ri-close-line"></i>
              Cerrar
            </button>
          </div>
          <div class="modal-body">
            <pre class="preview-box" id="preview-content">—</pre>
          </div>
          <div class="modal-actions">
            <button class="btn-ghost" type="button" id="preview-copy-btn">
              <i class="ri-file-copy-line"></i>
              Copiar
            </button>
            <button class="btn-primary" type="button" id="preview-send-btn">
              <i class="ri-send-plane-2-line"></i>
              Enviar
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Tu JS existente -->
  <script src="js/chargeit-minibar.js" defer></script>
</body>
</html>
